<!DOCTYPE html>
<html>
<head>
<title>Add to Playlist</title>
    <script
  src="https://code.jquery.com/jquery-3.2.1.min.js"
  integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
  crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
  <script src="mousetrap.min.js" charset="utf-8"></script>
<script type="text/javascript" src="https://ssl.p.jwpcdn.com/player/v/8.21.0/jwplayer.js"></script>
<script> jwplayer.key = 'ITWMv7t88JGzI0xPwW8I0+LveiXX9SWbfdmt0ArUSyc='; </script>
</head>
<body>
<div id="video"></div>
<script type="text/javascript">
    jwplayer("video").setup({
        height: 480,
        width: 840,
        file: "",
        image: "",
        title: "",
        listbar: {
        position: "right",
        size: 280,
        },
        primary: 'flash'
    }); 
    function addVideo(url, videoThumb, videoTitle) {
        var playlist = jwplayer().getPlaylist();
        var newItem = {
            file: url,
            image: videoThumb,
            title: videoTitle
        };
        playlist.push(newItem);
        jwplayer().load(playlist);
    }
    var video = document.getElementById('video');

function playM3u8(url){
  if(Hls.isSupported()) {
      jw.volume = 0.3;
      var hls = new Hls();
      var m3u8Url = decodeURIComponent(url)
      hls.loadSource(m3u8Url);
      hls.attachMedia(video);
      hls.on(Hls.Events.MANIFEST_PARSED,function() {
        jw.play();
      });
      document.title = url
    }
	else if (jw.canPlayType('application/vnd.apple.mpegurl')) {
		jw.file: = url;
		jw.addEventListener('canplay',function() {
		  jw.play();
		});
		jw.volume = 0.3;
		document.title = url;
  	}
}

playM3u8(window.location.href.split("?source=")[1])
$(window).on('load', function () {
    $('#video').on('click', function(){this.paused?this.play():this.pause();});
    Mousetrap.bind('space', playPause);
    Mousetrap.bind('up', volumeUp);
    Mousetrap.bind('down', volumeDown);
    Mousetrap.bind('right', seekRight);
    Mousetrap.bind('left', seekLeft);
    Mousetrap.bind('f', vidFullscreen);
});
</script>

    <script src="player.js"></script>
<p>Click on one of the links below to add an item to the player:</p>
<ul>
<li><a href="http://www.longtailvideo.com/support/jw-player/jw-player-for-flash-v5/16026/loading-a-playlist-into-the-player#" onclick="addVideo('https://d1r94zrwa3gnlo.cloudfront.net/livestore103/stream/hls/278/278.m3u8', 'http://content.bitsontherun.com/thumbs/yj1shGJB-320.jpg', 'Sintel trailer'); return false;">Add the Sintel trailer to the playlist</a></li>
<li><a href="http://www.longtailvideo.com/support/jw-player/jw-player-for-flash-v5/16026/loading-a-playlist-into-the-player#" onclick="addVideo('https://d1r94zrwa3gnlo.cloudfront.net/livestore103/stream/hls/279/279.m3u8', 'http://content.bitsontherun.com/thumbs/i8oQD9zd-640.jpg', 'Tears of Steel'); return false;">Add the Tears of Steel trailer to the playlist</a></li>
</ul>
</body>
</html>
