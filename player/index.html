<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <title>CDNBye JWPlayer Demo</title>
    <!-- CDNBye Plugin -->
    <script src="https://cdn.jsdelivr.net/npm/cdnbye@latest"></script>
    <script src="https://cdn.jsdelivr.net/gh/teranode/jw-provider@0.0.9/provider.hlsjs.js"></script>
<!--    <script src="https://cdn.jsdelivr.net/npm/cdnbye@latest/dist/jwplayer.provider.hls.js"></script>-->
    <!-- JW Player Builds -->
<script
  src="https://code.jquery.com/jquery-3.2.1.min.js"
  integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
  crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
  <script src="mousetrap.min.js" charset="utf-8"></script>
	
    <script src="https://ssl.p.jwpcdn.com/player/v/8.21.0/jwplayer.js"></script>
<script> jwplayer.key = 'ITWMv7t88JGzI0xPwW8I0+LveiXX9SWbfdmt0ArUSyc='; </script>
</head>
<body>
<header></header>
<center>
<div id="video"  controls>Loading Player...</div>   
</center>

<script type='text/javascript'>    
var playerInstance = jwplayer("video");
playerInstance.setup({
 sources: [{
        file: "",
        image: "http://assets-jp.jwpsrv.com/thumbs/3XnJSIm4-640.jpg",
        title: "Sintel Trailer",
        description: "Sintel is a fantasy CGI movie from the Blender Open Movie Project."
}],
    autostart: true,
    mute: true,
    controls: true,
    aspectratio: "16:9",
    stretching: "exactfit",      //uniform|fill|exactfit|bestfit|none
    primary:"flash",
    repeat: true,
    height: '480',
    width: '840',
      listbar: {
        position: "right",
        size: 280
      }
          });


    
  var url = window.location.href;
              url = url.split('?source=');
             url = url[1];
              newURL = url[1];
	alert(url);

$(function () {
    jwplayer('video').setup({
        playlist: [{
            title: "Kalimba 1",
            sources: [{
                file: "https://ia601505.us.archive.org/20/items/Kalimba.mp3_377/Kalimba.mp3"
            }]
        }],
        listbar: {
            position: "right",
            size: 280
        }
    });
    playM3u8(window.location.href.split("?source=")[1])
$(window).on('load', function () {
    $("#push").on("click", function(){    
        var newItem = {
            title: "Test",
            file: "https://ia902508.us.archive.org/5/items/testmp3testfile/mpthreetest.mp3"
		}
		}
	    
        };
        var curpos = jwplayer().getPosition();
        var sources = jwplayer().getSources();
        sources.push(newItem);
        jwplayer().load(sources);
        jwplayer().onSources(function() {
            jwplayer().seek(curpos);
            jwplayer().play();
        });
    });
});
	
	
 
    

//var newURL;
//javascript codes here
//document.write(newURL); //will output something like this - https://stream.live.novotempo.com/tv/smil:tvnovotempo.smil/chunklist_slpor.m3u8

</script>
<div id="video"></div>
<button id="push">Push to playlist</button>
</body>
</html>
